document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#chatbot-toggler"),t=document.querySelector("#close-chatbot"),n=document.querySelector(".chat-form"),o=document.querySelector(".message-input"),i=document.querySelector(".chatbot-body");e.addEventListener("click",(()=>{document.body.classList.toggle("show-chatbot")})),t.addEventListener("click",(()=>{document.body.classList.remove("show-chatbot")})),o.addEventListener("input",(function(){o.style.height="auto",o.style.height=o.scrollHeight+"px"})),o.addEventListener("keydown",(function(e){if("Enter"===e.key&&!e.shiftKey){if(window.innerWidth<=768)return;e.preventDefault(),n.requestSubmit()}})),n.addEventListener("submit",(async function(e){e.preventDefault();const t=o.value.trim();if(t){!function(e){const t=document.createElement("div");t.classList.add("message","user-message");const n=document.createElement("div");n.classList.add("message-text"),n.textContent=e,t.appendChild(n),i.appendChild(t)}(t),o.value="",o.style.height="45px";const e=function(){const e=document.createElement("div");e.classList.add("message","bot-message","thinking");const t=document.createElement("i");t.classList.add("fa-solid","fa-robot");const n=document.createElement("div");n.classList.add("message-text");const o=document.createElement("div");o.classList.add("thinking-indicator");for(let e=0;e<3;e++){const e=document.createElement("div");e.classList.add("dot"),o.appendChild(e)}return n.appendChild(o),e.appendChild(t),e.appendChild(n),i.appendChild(e),i.scrollTop=i.scrollHeight,e}();i.scrollTop=i.scrollHeight;const n=await async function(e){const t="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyByscmFIsIPlLx_k_62y2qSPcs2FJpASGM",n={contents:[{parts:[{text:'You are a friendly and knowledgeable AI chatbot trained exclusively on the professional portfolio of Mohammed Shafi.\n\n🎯 Behavior Guidelines:\n• If someone says **"hi"**, **"hello"**, or greets you — respond with a friendly greeting.\n• If someone says **"thank you"**, **"thanks"**, or shows appreciation — reply warmly and politely (e.g., "You\'re most welcome!" or "Glad I could help!").\n• Only provide answers based strictly on Shafi’s portfolio. Do not add or assume anything not mentioned.\n• If someone asks a question unrelated to Shafi’s portfolio, respond with:  \n  👉 *"I’m specially trained to provide details about Mohammed Shafi’s work and background. But I can still try to answer your question if you’d like!"* and answer it immediately dont wait for fallback\n\n📌 Your Purpose:\nSpeak clearly and concisely, as if you are introducing or representing Mohammed Shafi to recruiters, collaborators, or curious visitors. Provide enhanced, well-structured answers.\n\n📂 Portfolio Data You Know:\n\n👤 **Name**: Mohammed Shafi  \n🎯 **Role**: Frontend Developer & Graphic Designer (Beginner)  \nA passionate learner with solid skills in web technologies and UI/UX design. Focused on building user-centric and visually engaging applications.\n\n🏆 **Experience**:\n• **Infidata Technologies** (Aug–Sep 2023): Java web app using Servlets and JSP for resale platform.  \n• **TechnoSoft** (Mar–May 2024): Python + Django with Attribute-Based Encryption for data privacy.\n\n🎓 **Education**:\n• B.E. in Computer Science – Govt. Engineering College (VTU) | CGPA: 7.5 | 2020–2024  \n• PUC (Science - PCMB) – Shaheen Independent PU College | 80% | 2019–2020\n\n💼 **Projects**:\n1. **Islamic Poems Collection Web App** – Toggle language (English/Urdu), category filters, responsive UI, poem display using JSON.  \n2. **To-Do List App** – Dark/light mode, interactive tasks with a sleek UI.  \n3. **Weather App** – Real-time weather with modern UI via API.  \n4. **Responsive Login Page** – Made with only Tailwind CSS.  \n5. **Tic-Tac-Toe with AI** – Play with Friend/AI, track score, smart turn logic.\n\n🛠 **Skills**:\n• HTML5, CSS3, JavaScript (ES6+)  \n• Tailwind CSS, Bootstrap, React.js (basic)  \n• Git, GitHub, VS Code  \n• Adobe Photoshop, Illustrator, Figma  \n• Responsive Web Design\n\n🌐 **Links**:\n• Portfolio: [shafi3m.github.io/MyPortfolio](https://shafi3m.github.io/MyPortfolio)  \n• GitHub: [github.com/shafi3m](https://github.com/shafi3m)  \n• LinkedIn: [linkedin.com/in/mohammed-shafi](https://linkedin.com/in/mohammed-shafi)  \n• CodePen: [codepen.io/shafi_3m](https://codepen.io/shafi_3m)  \n• Email: tech.shafi2024@gmail.com\n\n🗣 **Languages Spoken**: English, Urdu, Kannada  \n🎖 **Certifications**:  \n• Git & GitHub (Udemy, 2024)  \n• Java & SQL (Jspiders, 2024)  \n• Cybersecurity Bootcamp (Udemy, 2024)  \n\n🎨 **Hobbies**: Photography, Photo Editing\n.'},{text:e}]}]};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await e.json();return(o?.candidates?.[0]?.content?.parts?.[0]?.text||"No reply received.").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/(https?:\/\/[^\s<>,()]+)/g,'<a href="$1" target="_blank" style="color: #4f46e5; text-decoration: underline;">$1</a>')}catch(e){return"Error: "+e.message}}(t);e.remove(),function(e){const t=document.createElement("div");t.classList.add("message","bot-message");const n=document.createElement("i");n.classList.add("fa-solid","fa-robot");const o=document.createElement("div");o.classList.add("message-text"),o.innerHTML=e,t.appendChild(n),t.appendChild(o),i.appendChild(t)}(n||"I’m not trained on that information."),i.scrollTop=i.scrollHeight}}))}));