document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#chatbot-toggler"),t=document.querySelector("#close-chatbot"),n=document.querySelector(".chat-form"),o=document.querySelector(".message-input"),i=document.querySelector(".chatbot-body");e.addEventListener("click",(()=>{document.body.classList.toggle("show-chatbot")})),t.addEventListener("click",(()=>{document.body.classList.remove("show-chatbot")})),o.addEventListener("input",(function(){o.style.height="auto",o.style.height=o.scrollHeight+"px"})),o.addEventListener("keydown",(function(e){if("Enter"===e.key&&!e.shiftKey){if(window.innerWidth<=768)return;e.preventDefault(),n.requestSubmit()}})),n.addEventListener("submit",(async function(e){e.preventDefault();const t=o.value.trim();if(t){!function(e){const t=document.createElement("div");t.classList.add("message","user-message");const n=document.createElement("div");n.classList.add("message-text"),n.textContent=e,t.appendChild(n),i.appendChild(t)}(t),o.value="",o.style.height="45px";const e=function(){const e=document.createElement("div");e.classList.add("message","bot-message","thinking");const t=document.createElement("i");t.classList.add("fa-solid","fa-robot");const n=document.createElement("div");n.classList.add("message-text");const o=document.createElement("div");o.classList.add("thinking-indicator");for(let e=0;e<3;e++){const e=document.createElement("div");e.classList.add("dot"),o.appendChild(e)}return n.appendChild(o),e.appendChild(t),e.appendChild(n),i.appendChild(e),i.scrollTop=i.scrollHeight,e}();i.scrollTop=i.scrollHeight;const n=await async function(e){const t="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyByscmFIsIPlLx_k_62y2qSPcs2FJpASGM",n={contents:[{parts:[{text:'You are a friendly and knowledgeable AI chatbot trained exclusively on the professional portfolio of Mohammed Shafi.\n\nðŸŽ¯ Behavior Guidelines:\nâ€¢ If someone says **"hi"**, **"hello"**, or greets you â€” respond with a friendly greeting.\nâ€¢ If someone says **"thank you"**, **"thanks"**, or shows appreciation â€” reply warmly and politely (e.g., "You\'re most welcome!" or "Glad I could help!").\nâ€¢ Only provide answers based strictly on Shafiâ€™s portfolio. Do not add or assume anything not mentioned.\nâ€¢ If someone asks a question unrelated to Shafiâ€™s portfolio, respond with:  \n  ðŸ‘‰ *"Iâ€™m specially trained to provide details about Mohammed Shafiâ€™s work and background. But I can still try to answer your question if youâ€™d like!"* and answer it immediately dont wait for fallback\n\nðŸ“Œ Your Purpose:\nSpeak clearly and concisely, as if you are introducing or representing Mohammed Shafi to recruiters, collaborators, or curious visitors. Provide enhanced, well-structured answers.\n\nðŸ“‚ Portfolio Data You Know:\n\nðŸ‘¤ **Name**: Mohammed Shafi  \nðŸŽ¯ **Role**: Frontend Developer & Graphic Designer (Beginner)  \nA passionate learner with solid skills in web technologies and UI/UX design. Focused on building user-centric and visually engaging applications.\n\nðŸ† **Experience**:\nâ€¢ **Infidata Technologies** (Augâ€“Sep 2023): Java web app using Servlets and JSP for resale platform.  \nâ€¢ **TechnoSoft** (Marâ€“May 2024): Python + Django with Attribute-Based Encryption for data privacy.\n\nðŸŽ“ **Education**:\nâ€¢ B.E. in Computer Science â€“ Govt. Engineering College (VTU) | CGPA: 7.5 | 2020â€“2024  \nâ€¢ PUC (Science - PCMB) â€“ Shaheen Independent PU College | 80% | 2019â€“2020\n\nðŸ’¼ **Projects**:\n1. **Islamic Poems Collection Web App** â€“ Toggle language (English/Urdu), category filters, responsive UI, poem display using JSON.  \n2. **To-Do List App** â€“ Dark/light mode, interactive tasks with a sleek UI.  \n3. **Weather App** â€“ Real-time weather with modern UI via API.  \n4. **Responsive Login Page** â€“ Made with only Tailwind CSS.  \n5. **Tic-Tac-Toe with AI** â€“ Play with Friend/AI, track score, smart turn logic.\n\nðŸ›  **Skills**:\nâ€¢ HTML5, CSS3, JavaScript (ES6+)  \nâ€¢ Tailwind CSS, Bootstrap, React.js (basic)  \nâ€¢ Git, GitHub, VS Code  \nâ€¢ Adobe Photoshop, Illustrator, Figma  \nâ€¢ Responsive Web Design\n\nðŸŒ **Links**:\nâ€¢ Portfolio: [shafi3m.github.io/MyPortfolio](https://shafi3m.github.io/MyPortfolio)  \nâ€¢ GitHub: [github.com/shafi3m](https://github.com/shafi3m)  \nâ€¢ LinkedIn: [linkedin.com/in/mohammed-shafi](https://linkedin.com/in/mohammed-shafi)  \nâ€¢ CodePen: [codepen.io/shafi_3m](https://codepen.io/shafi_3m)  \nâ€¢ Email: tech.shafi2024@gmail.com\n\nðŸ—£ **Languages Spoken**: English, Urdu, Kannada  \nðŸŽ– **Certifications**:  \nâ€¢ Git & GitHub (Udemy, 2024)  \nâ€¢ Java & SQL (Jspiders, 2024)  \nâ€¢ Cybersecurity Bootcamp (Udemy, 2024)  \n\nðŸŽ¨ **Hobbies**: Photography, Photo Editing\n.'},{text:e}]}]};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await e.json();return(o?.candidates?.[0]?.content?.parts?.[0]?.text||"No reply received.").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/(https?:\/\/[^\s<>,()]+)/g,'<a href="$1" target="_blank" style="color: #4f46e5; text-decoration: underline;">$1</a>')}catch(e){return"Error: "+e.message}}(t);e.remove(),function(e){const t=document.createElement("div");t.classList.add("message","bot-message");const n=document.createElement("i");n.classList.add("fa-solid","fa-robot");const o=document.createElement("div");o.classList.add("message-text"),o.innerHTML=e,t.appendChild(n),t.appendChild(o),i.appendChild(t)}(n||"Iâ€™m not trained on that information."),i.scrollTop=i.scrollHeight}}))}));